# Конфигурация моделей Hugging Face для ИИ-анализа

# Доступные модели для анализа
AVAILABLE_MODELS = {
    "ainize/bart-base-cnn": {
        "name": "ainize/bart-base-cnn",
        "description": "Рабочая модель для генерации текста",
        "max_length": 1024,
        "temperature": 0.8,
        "do_sample": True,
        "top_p": 0.9,
        "repetition_penalty": 1.2
    },
    "gpt2": {
        "name": "gpt2",
        "description": "Базовая модель для генерации текста",
        "max_length": 200,
        "temperature": 0.8,
        "do_sample": True,
        "top_p": 0.9,
        "repetition_penalty": 1.1
    },
    "facebook/bart-base": {
        "name": "facebook/bart-base",
        "description": "Модель для понимания текста",
        "max_length": 1024,
        "temperature": 0.7,
        "do_sample": True,
        "top_p": 0.9
    }
}

# Промпты для разных типов анализа
PROMPTS = {
    "seo_analysis": """Анализ карточки бизнеса на Яндекс.Картах (2025). Данные: {text}

СТРОГО СЛЕДУЙ СТРУКТУРЕ:

1. НАЗВАНИЕ КОМПАНИИ:
- Проверь: только официальное название без ключевых слов
- Если есть лишние слова (метро, район) - убрать
- Примеры: "Салон красоты Елена" ✓, "Салон красоты Елена у метро Парк Победы" ✗

2. УСЛУГИ И ТОВАРЫ:
- Добавить геолокацию и ключевые слова в названия услуг
- Примеры: "Стрижка у метро Парк Победы", "Маникюр в Московском районе"
- Проверить наличие фото для каждой услуги

3. АДРЕС И КОНТАКТЫ:
- Полный адрес (город, улица, дом)
- Добавить ближайшее метро/остановку
- Все рабочие телефоны

4. РУБРИКИ:
- Основная рубрика максимально точная
- 1-2 смежные релевантные рубрики

5. ФОТО И КОНТЕНТ:
- Минимум 10 уникальных фото
- Обновлять раз в квартал
- Фасад, интерьер, команда, процесс работы

6. ОТЗЫВЫ И АКТИВНОСТЬ:
- Ответы на все отзывы
- Публикация новостей/акций раз в неделю
- В ответах и постах использовать гео и ключевые слова

7. СЕРВИСНАЯ ИНФОРМАЦИЯ:
- Часы работы (корректные)
- Способы оплаты: наличные, карты, СБП, Яндекс Пэй, QIWI
- НЕ советовать Google Pay/Apple Pay (не работают в России)

Дай конкретные рекомендации по каждому разделу на основе реальных данных карточки. Будь практичным и давай примеры исправлений.""",
    "rating_analysis": "Анализ рейтинга и отзывов. Данные: {text}. Оцени качество и дай 2-3 совета по улучшению.",
    "general_analysis": "Общий анализ бизнеса. Данные: {text}. Дай 3-4 рекомендации по развитию."
}

# Текущая активная модель
CURRENT_MODEL = "ainize/bart-base-cnn"

def get_model_config(model_name=None):
    """Получить конфигурацию модели"""
    if model_name is None:
        model_name = CURRENT_MODEL
    
    return AVAILABLE_MODELS.get(model_name, AVAILABLE_MODELS["ainize/bart-base-cnn"])

def get_prompt(prompt_type="seo_analysis", text=""):
    """Получить промпт для анализа"""
    return PROMPTS.get(prompt_type, PROMPTS["seo_analysis"]).format(text=text)
