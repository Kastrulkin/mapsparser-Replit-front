# Конфигурация моделей Hugging Face для ИИ-анализа

# Доступные модели для анализа
AVAILABLE_MODELS = {
    "ainize/bart-base-cnn": {
        "name": "ainize/bart-base-cnn",
        "description": "Рабочая модель для генерации текста",
        "max_length": 1024,
        "temperature": 0.8,
        "do_sample": True,
        "top_p": 0.9,
        "repetition_penalty": 1.2
    },
    "gpt2": {
        "name": "gpt2",
        "description": "Базовая модель для генерации текста",
        "max_length": 200,
        "temperature": 0.8,
        "do_sample": True,
        "top_p": 0.9,
        "repetition_penalty": 1.1
    },
    "facebook/bart-base": {
        "name": "facebook/bart-base",
        "description": "Модель для понимания текста",
        "max_length": 1024,
        "temperature": 0.7,
        "do_sample": True,
        "top_p": 0.9
    }
}

# Промпты для разных типов анализа
PROMPTS = {
    "seo_analysis": """Анализ карточки бизнеса на Яндекс.Картах (2025). Данные: {text}

АНАЛИЗИРУЙ ДАННЫЕ И ДАЙ ПЕРСОНАЛИЗИРОВАННЫЕ РЕКОМЕНДАЦИИ:

ОЦЕНКА ТЕКУЩЕГО СОСТОЯНИЯ:
- Укажи конкретные цифры: рейтинг, количество отзывов, фото
- Отметь что есть хорошо, что можно улучшить
- Будь конкретным: "У вас рейтинг 4.3 из 5, но всего 14 отзывов"

РЕКОМЕНДАЦИИ:
- Дай 3-5 конкретных действий с примерами
- Используй реальные данные из карточки
- Предлагай практические решения: "повесить QR код в помещении"
- Указывай сроки: "добавляйте новые фото каждые три месяца"

СТИЛЬ ОТВЕТА:
- Пиши от второго лица: "У вас есть...", "Добавьте..."
- Будь дружелюбным, но деловым
- Не используй общие фразы типа "улучшает SEO"
- Давай конкретные примеры: "маникюр в Московском районе"

ПРИМЕР ХОРОШЕГО ОТВЕТА:
"У вас хороший рейтинг (4.3), но есть потенциал для роста. Всего 14 отзывов, попросите клиентов оставлять отзывы после посещения, можно повесить QR код в помещении. Есть ссылка на сайт и название без лишних слов.

К названию услуги лучше добавить привязку - 'например маникюр в Московском районе'.

Фотографии есть, добавляйте новые каждые три месяца.

Нет новостей, нет ответов на отзывы - это важно."

Анализируй данные и дай такой же конкретный и персонализированный ответ.""",
    "rating_analysis": "Анализ рейтинга и отзывов. Данные: {text}. Оцени качество и дай 2-3 совета по улучшению.",
    "general_analysis": "Общий анализ бизнеса. Данные: {text}. Дай 3-4 рекомендации по развитию."
}

# Текущая активная модель
CURRENT_MODEL = "ainize/bart-base-cnn"

def get_model_config(model_name=None):
    """Получить конфигурацию модели"""
    if model_name is None:
        model_name = CURRENT_MODEL
    
    return AVAILABLE_MODELS.get(model_name, AVAILABLE_MODELS["ainize/bart-base-cnn"])

def get_prompt(prompt_type="seo_analysis", text=""):
    """Получить промпт для анализа"""
    return PROMPTS.get(prompt_type, PROMPTS["seo_analysis"]).format(text=text)
