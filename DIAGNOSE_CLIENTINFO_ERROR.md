# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏ "no such column: business_id"

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ `no such column: business_id` –≤—Å—ë –µ—â—ë –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ:
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Flask —Å–µ—Ä–≤–µ—Ä–∞

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω** - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–ª–æ–Ω–∫–∏
2. **Flask –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥—É—é –ë–î** - –Ω–µ —Ç—É, –≥–¥–µ –±—ã–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∫–æ–¥ –Ω–µ –≤–∏–¥–∏—Ç –∫–æ–ª–æ–Ω–∫—É
4. **–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Flask** - –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –∫ —Å—Ç–∞—Ä–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã

```bash
ssh root@80.78.242.105
cd /root/mapsparser-Replit-front
source venv/bin/activate

python -c "
import sqlite3
conn = sqlite3.connect('src/reports.db')
cursor = conn.cursor()
cursor.execute('PRAGMA table_info(ClientInfo)')
columns = [col[1] for col in cursor.fetchall()]
print('–ö–æ–ª–æ–Ω–∫–∏ –≤ ClientInfo:', columns)
print('–ï—Å—Ç—å business_id:', 'business_id' in columns)
if 'business_id' not in columns:
    print('‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ö–æ–ª–æ–Ω–∫–∞ business_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!')
    print('–ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ')
else:
    print('‚úÖ –ö–æ–ª–æ–Ω–∫–∞ business_id —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
conn.close()
"
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Flask –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ

```bash
# –°–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API (–∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ curl)
# –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:

tail -50 /tmp/seo_main.out | grep -A 10 -B 10 "business_id\|ClientInfo\|ERROR\|Traceback"
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ–±–Ω–æ–≤–ª–µ–Ω
cd /root/mapsparser-Replit-front
git log --oneline -5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ main.py –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–∫–∏
grep -n "PRAGMA table_info(ClientInfo)" src/main.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–∫–∏)
grep -A 5 "if 'business_id' in columns" src/main.py
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å Flask —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Flask
ps aux | grep "python.*main.py" | grep -v grep

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–æ–≥–¥–∞ –æ–Ω–∏ –∑–∞–ø—É—â–µ–Ω—ã
lsof -iTCP:8000 -sTCP:LISTEN

# –£–±–∏—Ç—å –í–°–ï –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
pkill -9 -f "python.*main.py"
sleep 3
cd /root/mapsparser-Replit-front
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &
sleep 5
lsof -iTCP:8000 -sTCP:LISTEN
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∞—è –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π –ø—É—Ç—å –∫ –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ
grep -n "reports.db\|get_db_connection\|DB_PATH" src/main.py | head -10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –ë–î —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -lh src/reports.db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ç—Ç–æ–π –ë–î
sqlite3 src/reports.db "PRAGMA table_info(ClientInfo);"
```

## –†–µ—à–µ–Ω–∏–µ

### –ï—Å–ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î:

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ
python src/migrate_clientinfo_add_business_id.py
```

### –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Flask
pkill -9 -f "python.*main.py"
sleep 2
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &
sleep 3
```

### –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

```bash
# –£–±–∏—Ç—å –í–°–ï –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -9 -f "python.*main.py"
sleep 3

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
lsof -iTCP:8000 -sTCP:LISTEN
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–≤–æ–¥–∞

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
cd /root/mapsparser-Replit-front
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫
lsof -iTCP:8000 -sTCP:LISTEN
tail -30 /tmp/seo_main.out
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://beautybot.pro
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–ª–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Flask: `tail -50 /tmp/seo_main.out`

