# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: Flask —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

## –ü—Ä–æ–±–ª–µ–º–∞

**–°–∫—Ä–∏–ø—Ç `update_server.sh` –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç `seo-worker`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç `worker.py`, –∞ –Ω–µ `main.py`!**

- `seo-worker.service` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç `worker.py` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞)
- `seo-api.service` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç `main.py` (Flask API —Å–µ—Ä–≤–µ—Ä)
- –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª `seo-worker`, –ø–æ—ç—Ç–æ–º—É Flask API (`main.py`) –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª—Å—è!

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Flask API –≤—Ä—É—á–Ω—É—é (–°–†–û–ß–ù–û)

```bash
ssh root@80.78.242.105

# 1. –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å Flask –Ω–∞ –ø–æ—Ä—Ç—É 8000
lsof -iTCP:8000 -sTCP:LISTEN

# 2. –£–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã main.py
pkill -9 -f "python.*main.py"

# 3. –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã
sleep 2

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
lsof -iTCP:8000 -sTCP:LISTEN
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–≤–æ–¥–∞

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å Flask API –∑–∞–Ω–æ–≤–æ
cd /root/mapsparser-Replit-front
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &

# 6. –ü–æ–¥–æ–∂–¥–∞—Ç—å 3 —Å–µ–∫—É–Ω–¥—ã
sleep 3

# 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
lsof -iTCP:8000 -sTCP:LISTEN
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å

# 8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -20 /tmp/seo_main.out
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ systemd (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω seo-api)

```bash
ssh root@80.78.242.105

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ª–∏ seo-api
systemctl status seo-api

# –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart seo-api

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status seo-api --no-pager | head -10
lsof -iTCP:8000 -sTCP:LISTEN
```

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ –°–∫—Ä–∏–ø—Ç `update_server.sh` —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Flask API
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, –∫–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç `main.py` (seo-api –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é)
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://beautybot.pro
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ `no such column: business_id` –∏—Å—á–µ–∑–ª–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

**Flask —Å–µ—Ä–≤–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–¥ –≤ –ø–∞–º—è—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.** –ï—Å–ª–∏ –∫–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î), –Ω–æ Flask —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω, –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∏–∑ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ç–∞–±–ª–∏—Ü.

**–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Flask —Å–µ—Ä–≤–µ—Ä –∑–∞–≥—Ä—É–∑–∏—Ç –Ω–æ–≤—ã–π –∫–æ–¥ –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã (—Å –∫–æ–ª–æ–Ω–∫–æ–π business_id).**

