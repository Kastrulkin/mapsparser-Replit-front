# ðŸ”„ ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

## ðŸ“‹ Ð§ÐµÑ‚ÐºÐ¸Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹

### 1ï¸âƒ£ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² **Frontend** (React/TypeScript)

#### Ð¨Ð°Ð³ 1: ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´
```bash
cd frontend
rm -rf dist
npm run build
```

#### Ð¨Ð°Ð³ 2: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ±Ð¾Ñ€ÐºÑƒ
```bash
ls -lh dist/assets/index-*.js
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑÐ²ÐµÐ¶Ð¸Ð¹ Ñ„Ð°Ð¹Ð» Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð´Ð°Ñ‚Ð¾Ð¹
```

#### Ð¨Ð°Ð³ 3: ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Flask ÑÐµÑ€Ð²ÐµÑ€
```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
PID=$(lsof -tiTCP:8000 -sTCP:LISTEN -P)
kill -9 $PID

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹
cd ..
source venv/bin/activate
python src/main.py &
```

#### Ð¨Ð°Ð³ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€
```bash
lsof -iTCP:8000 -sTCP:LISTEN
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 8000
```

#### Ð¨Ð°Ð³ 5: ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐµÑˆ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°
- Ð–ÐµÑÑ‚ÐºÐ°Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°: **Cmd+Shift+R** (Mac) Ð¸Ð»Ð¸ **Ctrl+Shift+R** (Windows/Linux)
- Ð˜Ð»Ð¸ Ñ€ÐµÐ¶Ð¸Ð¼ Ð¸Ð½ÐºÐ¾Ð³Ð½Ð¸Ñ‚Ð¾: **Cmd+Shift+N**

---

### 2ï¸âƒ£ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² **Backend** (Python/Flask)

#### Ð¨Ð°Ð³ 1: ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
```bash
PID=$(lsof -tiTCP:8000 -sTCP:LISTEN -P)
kill -9 $PID
sleep 2
```

#### Ð¨Ð°Ð³ 2: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
```bash
lsof -iTCP:8000 -sTCP:LISTEN
# ÐÐµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð²Ñ‹Ð²Ð¾Ð´Ð°
```

#### Ð¨Ð°Ð³ 3: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ
```bash
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &
sleep 3
```

#### Ð¨Ð°Ð³ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿ÑƒÑÐº
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ñ€Ñ‚Ð°
lsof -iTCP:8000 -sTCP:LISTEN

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
tail -10 /tmp/seo_main.out
```

#### Ð¨Ð°Ð³ 5: Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÐ»Ð°ÑÑŒ Ð‘Ð” - Ð¾Ñ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸
```bash
sqlite3 src/reports.db "DELETE FROM UserSessions WHERE user_id = (SELECT id FROM Users WHERE email='Ð’ÐÐ¨_EMAIL');"
```

#### Ð¨Ð°Ð³ 6: Ð’Ñ‹Ð¹Ñ‚Ð¸ Ð¸ Ð²Ð¾Ð¹Ñ‚Ð¸ Ð·Ð°Ð½Ð¾Ð²Ð¾ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
- Ð¡Ñ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ

---

### 3ï¸âƒ£ Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² **Ð‘Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…**

#### Ð¨Ð°Ð³ 1: Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿
```bash
python src/safe_db_utils.py
# Ð˜Ð»Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ:
cp src/reports.db db_backups/reports_$(date +%Y%m%d_%H%M%S).db.backup
```

#### Ð¨Ð°Ð³ 2: ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ
```bash
python src/migrate_wizard_data_safe.py
# Ð˜Ð»Ð¸ Ð´Ñ€ÑƒÐ³ÑƒÑŽ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑŽ
```

#### Ð¨Ð°Ð³ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ
```bash
sqlite3 src/reports.db "SELECT COUNT(*) FROM Businesses;"
```

#### Ð¨Ð°Ð³ 4: Ð•ÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÐ»Ð°ÑÑŒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° - Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€
```bash
# Ð¡Ð¼. Ñ€Ð°Ð·Ð´ÐµÐ» "Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² Backend"
```

---

### 4ï¸âƒ£ ÐšÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ (Frontend + Backend)

#### ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:
```bash
# 1. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹
pkill -f "python.*main.py"
pkill -f "python.*user_api.py"
pkill -f "python.*worker.py"

# 2. ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´
cd frontend
rm -rf dist
npm run build
cd ..

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ±Ð¾Ñ€ÐºÑƒ
ls -lh frontend/dist/assets/index-*.js

# 4. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐµÑ€Ð²ÐµÑ€
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &
sleep 3

# 5. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿ÑƒÑÐº
lsof -iTCP:8000 -sTCP:LISTEN

# 6. ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸ (ÐµÑÐ»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÐ»Ð°ÑÑŒ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸)
sqlite3 src/reports.db "DELETE FROM UserSessions;"

# 7. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
tail -20 /tmp/seo_main.out
```

---

## ðŸŽ¯ Ð”Ð»Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ is_superadmin

### Ð§Ñ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ð½Ð¾:
1. âœ… Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½ `auth_system.py` - Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ `bool()` Ð´Ð»Ñ `is_superadmin`
2. âœ… Ð£Ð´Ð°Ð»ÐµÐ½Ñ‹ ÑÑ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸ Ð¸Ð· Ð‘Ð”
3. âœ… ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑ‰ÐµÐ½ ÑÐµÑ€Ð²ÐµÑ€

### Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð¡Ð•Ð™Ð§ÐÐ¡:

1. **Ð£Ð±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ ÑÐµÑ€Ð²ÐµÑ€ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑ‰ÐµÐ½:**
```bash
ps aux | grep "python.*main.py" | grep -v grep
# Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÑÑ‚Ð°Ñ€Ñ‹Ð¹ (Ð¿Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸), ÑƒÐ±Ð¸Ñ‚ÑŒ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð·Ð°Ð½Ð¾Ð²Ð¾
```

2. **Ð’Ñ‹Ð¹Ñ‚Ð¸ Ð¸Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ** (ÐºÐ½Ð¾Ð¿ÐºÐ° "Ð’Ñ‹Ð¹Ñ‚Ð¸")

3. **ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ localStorage Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ:**
   - ÐžÑ‚ÐºÑ€Ð¾Ð¹ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ (F12)
   - Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸: `localStorage.clear()`

4. **Ð’Ð¾Ð¹Ñ‚Ð¸ Ð·Ð°Ð½Ð¾Ð²Ð¾** - ÑÐ¾Ð·Ð´Ð°ÑÑ‚ÑÑ Ð½Ð¾Ð²Ð°Ñ ÑÐµÑÑÐ¸Ñ

5. **ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ** - Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ `is_superadmin: true`

---

## âš ï¸ Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð½Ðµ Ð²Ð¸Ð´Ð½Ñ‹

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° 1: ÐšÐµÑˆ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°**
- Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ð–ÐµÑÑ‚ÐºÐ°Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° (Cmd+Shift+R) Ð¸Ð»Ð¸ Ñ€ÐµÐ¶Ð¸Ð¼ Ð¸Ð½ÐºÐ¾Ð³Ð½Ð¸Ñ‚Ð¾

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° 2: Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Flask**
- Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ð¯Ð²Ð½Ð¾ ÑƒÐ±Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð·Ð°Ð½Ð¾Ð²Ð¾

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° 3: Ð¡Ñ‚Ð°Ñ€Ð°Ñ ÑÐµÑÑÐ¸Ñ Ð² Ð‘Ð”**
- Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸ Ð¸ Ð²Ð¾Ð¹Ñ‚Ð¸ Ð·Ð°Ð½Ð¾Ð²Ð¾

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° 4: Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð½Ðµ Ð¿ÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ð½**
- Ð ÐµÑˆÐµÐ½Ð¸Ðµ: Ð£Ð±ÐµÐ´Ð¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ð¾ `dist/` Ð¿ÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ð½ (`rm -rf dist && npm run build`)

---

## ðŸ“ Ð§ÐµÐºÐ»Ð¸ÑÑ‚ Ð¿ÐµÑ€ÐµÐ´ Ð´ÐµÐ¿Ð»Ð¾ÐµÐ¼

- [ ] Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð¿ÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ð½ (`npm run build`)
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð½Ð¾Ð²Ñ‹Ð¹ JS Ñ„Ð°Ð¹Ð» Ð² `dist/assets/`
- [ ] Ð¡Ñ‚Ð°Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Flask Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
- [ ] ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Flask Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½ Ð¿Ð¾Ñ€Ñ‚ 8000 (Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÑÐ»ÑƒÑˆÐ°ÐµÑ‚)
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ñ‹ Ð»Ð¾Ð³Ð¸ ÑÐµÑ€Ð²ÐµÑ€Ð° (Ð½ÐµÑ‚ Ð¾ÑˆÐ¸Ð±Ð¾Ðº)
- [ ] ÐžÑ‡Ð¸Ñ‰ÐµÐ½Ñ‹ ÑÑ‚Ð°Ñ€Ñ‹Ðµ ÑÐµÑÑÐ¸Ð¸ (ÐµÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾)
- [ ] ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð²Ñ…Ð¾Ð´ Ð·Ð°Ð½Ð¾Ð²Ð¾
- [ ] ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð° ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð° (Ð½ÐµÑ‚ Ð¾ÑˆÐ¸Ð±Ð¾Ðº)

---

## ðŸš€ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

Ð¡Ð¾Ð·Ð´Ð°Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ `update.sh`:
```bash
#!/bin/bash
echo "ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°..."

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
pkill -f "python.*main.py"

# ÐŸÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ° Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
cd frontend && rm -rf dist && npm run build && cd ..

# Ð—Ð°Ð¿ÑƒÑÐº
source venv/bin/activate
python src/main.py >/tmp/seo_main.out 2>&1 &

echo "âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ: http://localhost:8000"
```

