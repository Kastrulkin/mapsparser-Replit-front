# –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –∫–æ–¥–∞ –ø–æ –ø–ª–∞–Ω–∞–º –∏–∑ `Architect_audit_report.md`.

**–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã:** —Å–º. `.cursor/rules/code_implementation_workflow.mdc`

---

## üìù –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 2024-12-XX - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ ClientInfo

**–ü–ª–∞–Ω –∏–∑ Architect_audit_report.md:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "no such column: business_id" –≤ ClientInfo
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü—ã
- –ü–æ–∏—Å–∫ business_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Businesses –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ business_id

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –≤ `src/main.py`: –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ª–æ–Ω–æ–∫ (`old_column_names`) –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü—ã
- –û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `src/migrate_clientinfo_add_business_id.py`: –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ business_id –∏–∑ —Ç–∞–±–ª–∏—Ü—ã Businesses –ø–æ user_id –ø–µ—Ä–µ–¥ fallback –Ω–∞ user_id

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 3035-3041) - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ª–æ–Ω–æ–∫
- `src/migrate_clientinfo_add_business_id.py` (—Å—Ç—Ä–æ–∫–∏ 58-68) - –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ business_id –∏–∑ Businesses

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

### 2025-01-03 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (3 —ç—Ç–∞–ø–∞)

**–ü–ª–∞–Ω –∏–∑ Architect_audit_report.md:**
- –≠—Ç–∞–ø 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- –≠—Ç–∞–ø 2: –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü (–≤–∞–∂–Ω–æ)
- –≠—Ç–∞–ø 3: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Ö–æ–∂–∏—Ö —Ç–∞–±–ª–∏—Ü Examples (—É–ª—É—á—à–µ–Ω–∏—è)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/migrate_add_missing_indexes.py`: –¥–æ–±–∞–≤–ª–µ–Ω–æ 10 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/migrate_remove_duplicate_tables.py`: –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ ClientInfo, GigaChatTokenUsage, Cards –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/migrate_merge_examples_tables.py`: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ UserNewsExamples, UserReviewExamples, UserServiceExamples –≤ UserExamples
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py`: –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å—Ç–∞—Ä—ã–º —Ç–∞–±–ª–∏—Ü–∞–º Examples –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ UserExamples —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ example_type

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/migrate_add_missing_indexes.py` - —Å–æ–∑–¥–∞–Ω (10 –∏–Ω–¥–µ–∫—Å–æ–≤)
- `src/migrate_remove_duplicate_tables.py` - —Å–æ–∑–¥–∞–Ω (–º–∏–≥—Ä–∞—Ü–∏—è 3 —Ç–∞–±–ª–∏—Ü)
- `src/migrate_merge_examples_tables.py` - —Å–æ–∑–¥–∞–Ω (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ 3 —Ç–∞–±–ª–∏—Ü)
- `src/main.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ 21 –º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü Examples –Ω–∞ UserExamples

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 5-10 —Ä–∞–∑ (–±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–¥–µ–∫—Å–∞–º)
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ö–µ–º—ã: -5-9 —Ç–∞–±–ª–∏—Ü (—Å 46-50 –¥–æ 40-41)
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (–æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ Examples –≤–º–µ—Å—Ç–æ —Ç—Ä–µ—Ö)

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

### 2025-01-03 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ f-strings –≤ SQL –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü–ª–∞–Ω –∏–∑ Architect_audit_report.md:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å f-strings –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ç–∞–±–ª–∏—Ü
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ f-strings –≤ SQL

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `src/migrate_remove_duplicate_tables.py`: –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ `ALLOWED_TABLES`, f-string –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `src/migrate_merge_examples_tables.py`: –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ `ALLOWED_TABLES`, –≤—Å–µ f-strings –≤ SQL –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/migrate_remove_duplicate_tables.py` (—Å—Ç—Ä–æ–∫–∏ 12-17) - –¥–æ–±–∞–≤–ª–µ–Ω `ALLOWED_TABLES`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω f-string –≤ `_migrate_table_data()`
- `src/migrate_merge_examples_tables.py` (—Å—Ç—Ä–æ–∫–∏ 12, 32, 70) - –¥–æ–±–∞–≤–ª–µ–Ω `ALLOWED_TABLES`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã f-strings –≤ SQL –∑–∞–ø—Ä–æ—Å–∞—Ö

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í—Å–µ –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ f-strings –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç SQL injection
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `ValueError` –¥–ª—è –Ω–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

### 2025-01-03 - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ë–∏–∑–Ω–µ—Å —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å

**–ü–ª–∞–Ω –∏–∑ Architect_audit_report.md:**
- –°–¥–µ–ª–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ø–Ω–¥–µ–∫—Å.–ë–∏–∑–Ω–µ—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å (–≤–∞—Ä–∏–∞–Ω—Ç 2)
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É SyncQueue –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ò–∑–º–µ–Ω–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/admin/yandex/sync/business/<business_id>` - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –≤—ã–∑–æ–≤–∞
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–¥–∞—á —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ worker.py
- –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `SyncQueue` –≤ `src/init_database_schema.py` —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- –ò–∑–º–µ–Ω–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/admin/yandex/sync/business/<business_id>`: –≤–º–µ—Å—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `process_sync_queue()` –≤ `src/worker.py` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/admin/yandex/sync/status/<sync_id>` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/init_database_schema.py` (—Å—Ç—Ä–æ–∫–∏ 117-130, 362-365) - —Å–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ SyncQueue –∏ –∏–Ω–¥–µ–∫—Å—ã
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 5552-5579, 5905-5945) - –∏–∑–º–µ–Ω–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –¥–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å—Ç–∞—Ç—É—Å–∞
- `src/worker.py` (—Å—Ç—Ä–æ–∫–∏ 319-646) - –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `process_sync_queue()` —Å –ø–æ–ª–Ω–æ–π –ª–æ–≥–∏–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤ Nginx
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç "—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—â–µ–Ω–∞"
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–¥–µ—Ç –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ worker
- –ú–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

### 2025-01-03 - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ SyncQueue –∏ ParseQueue –≤ –µ–¥–∏–Ω—É—é –æ—á–µ—Ä–µ–¥—å

**–ü–ª–∞–Ω –∏–∑ Architect_audit_report.md:**
- –û–±—ä–µ–¥–∏–Ω–∏—Ç—å SyncQueue –≤ ParseQueue, –¥–æ–±–∞–≤–∏–≤ –ø–æ–ª–µ `task_type` –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ SyncQueue –≤ ParseQueue
- –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—á–µ—Ä–µ–¥–µ–π –≤ worker.py
- –ò–∑–º–µ–Ω–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ main.py –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ParseQueue

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/migrate_syncqueue_to_parsequeue.py`: –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –≤ ParseQueue –∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ SyncQueue
- –û–±–Ω–æ–≤–ª–µ–Ω `src/init_database_schema.py`: ParseQueue —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è `task_type`, `account_id`, `source`, `error_message`, `updated_at`; –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω `src/worker.py`: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π –≤ `process_queue()`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ ParseQueue
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_process_sync_yandex_business_task()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - `process_queue()` —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ —Å `task_type = 'parse_card'` (–ø–∞—Ä—Å–∏–Ω–≥) –∏ `task_type = 'sync_yandex_business'` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
  - –£–±—Ä–∞–Ω –≤—ã–∑–æ–≤ `process_sync_queue()` –∏–∑ main loop
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py`:
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/admin/yandex/sync/business/<business_id>` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ParseQueue –≤–º–µ—Å—Ç–æ SyncQueue
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/admin/yandex/sync/status/<sync_id>` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ParseQueue —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `task_type = 'sync_yandex_business'`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/migrate_syncqueue_to_parsequeue.py` - —Å–æ–∑–¥–∞–Ω (–º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
- `src/init_database_schema.py` (—Å—Ç—Ä–æ–∫–∏ 101-135) - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ParseQueue, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π
- `src/worker.py` (—Å—Ç—Ä–æ–∫–∏ 13-25, 30-321, 637-641) - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π, –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_process_sync_yandex_business_task()`
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 5554-5580, 5921-5925) - –∏–∑–º–µ–Ω–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ParseQueue

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ï–¥–∏–Ω–∞—è –æ—á–µ—Ä–µ–¥—å ParseQueue –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á (–ø–∞—Ä—Å–∏–Ω–≥ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ worker.py (–æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö)
- –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∑–∞–¥–∞—á (sync_google_business, sync_2gis)
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–ª—ã–µ —Å–ø–∏—Å–∫–∏ —Ç–∞–±–ª–∏—Ü –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è SQL injection –≤ `_ensure_column_exists()` –∏ `column_exists()`

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º SyncQueue

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–∞–±–ª–∏—Ü–∞ SyncQueue –ø–æ–∫–∞ –Ω–µ —É–¥–∞–ª–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### 2025-01-03 - Fallback –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ –∫–∞–±–∏–Ω–µ—Ç –∏ —Ä–æ—Ç–∞—Ü–∏—è IP

**–ü–ª–∞–Ω –∏–∑ TASK_CABINET_FALLBACK_PARSING.md –∏ TASK_IP_ROTATION.md:**
- –î–æ–±–∞–≤–∏—Ç—å fallback –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –Ω–µ—É—Å–ø–µ—à–Ω–æ–≥–æ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–æ—Ç–∞—Ü–∏–∏ IP (—Ç–∞–±–ª–∏—Ü–∞, ProxyManager, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
- –†–∞–±–æ—Ç–∞ –Ω–∞ –±–∞–∑–æ–≤–æ–º –∞–¥—Ä–µ—Å–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ (–ø–æ–∫–∞ –ø—Ä–æ–∫—Å–∏ –Ω–µ –∫—É–ø–ª–µ–Ω—ã)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**Fallback –ø–∞—Ä—Å–∏–Ω–≥:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `_is_parsing_successful()` –∏ `_has_cabinet_account()` –≤ `src/worker.py`
- –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `parse_card`: –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—Ö–µ –∏ –Ω–∞–ª–∏—á–∏–∏ –∫–∞–±–∏–Ω–µ—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–∞ `parse_cabinet_fallback`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_process_cabinet_fallback_task()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ fallback –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ YandexBusinessParser
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `task_type = 'parse_cabinet_fallback'` –≤ `process_queue()`

**–†–æ—Ç–∞—Ü–∏—è IP:**
- –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `ProxyServers` –≤ `src/init_database_schema.py` —Å –ø–æ–ª—è–º–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `src/proxy_manager.py` —Å –∫–ª–∞—Å—Å–æ–º `ProxyManager`:
  - `get_next_proxy()` - –ø–æ–ª—É—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ–∫—Å–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None, –µ—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –Ω–µ—Ç)
  - `mark_proxy_success()` / `mark_proxy_failure()` - –æ—Ç–º–µ—á–∞–µ—Ç —É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏
  - `check_proxy()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏
  - `get_proxy_for_playwright()` - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Playwright
- –°–æ–∑–¥–∞–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤ `src/main.py`:
  - `GET /api/admin/proxies` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏
  - `POST /api/admin/proxies` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏
  - `DELETE /api/admin/proxies/<proxy_id>` - —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–∫—Å–∏
  - `POST /api/admin/proxies/<proxy_id>/toggle` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/worker.py` (—Å—Ç—Ä–æ–∫–∏ 8-156) - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ fallback
- `src/init_database_schema.py` (—Å—Ç—Ä–æ–∫–∏ 131-148, 377-380) - —Å–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ ProxyServers –∏ –∏–Ω–¥–µ–∫—Å—ã
- `src/proxy_manager.py` - —Å–æ–∑–¥–∞–Ω (–º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏)
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 5965-6095) - –¥–æ–±–∞–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ü—Ä–∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ–º –ø—É–±–ª–∏—á–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ (–∫–∞–ø—á–∞, –Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–∞ fallback —á–µ—Ä–µ–∑ –∫–∞–±–∏–Ω–µ—Ç
- Fallback –ø–∞—Ä—Å–∏–Ω–≥ –¥–æ–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ (–æ—Ç–∑—ã–≤—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ IP –≥–æ—Ç–æ–≤–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–∫—Å–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None)
- –ö–æ–≥–¥–∞ –ø—Ä–æ–∫—Å–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

**–°—Ç–∞—Ç—É—Å:**
- [x] Fallback –ø–∞—Ä—Å–∏–Ω–≥ - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- [x] –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ—Ç–∞—Ü–∏–∏ IP - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ –≤ –ø–∞—Ä—Å–µ—Ä—ã - –æ—Ç–ª–æ–∂–µ–Ω–æ (–±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø—Ä–æ–∫—Å–∏)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ProxyManager –≤ –ø–∞—Ä—Å–µ—Ä—ã (parser_interception.py, parser.py, yandex_business_parser.py) –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø—Ä–æ–∫—Å–∏. –°–µ–π—á–∞—Å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–æ–∫—Å–∏ (–Ω–∞ –±–∞–∑–æ–≤–æ–º –∞–¥—Ä–µ—Å–µ).

---

### 2025-01-03 - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–ü–ª–∞–Ω –∏–∑ FRONTEND_TASK_PROXY_UI.md:**
- –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ProxyManagement.tsx –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–ü—Ä–æ–∫—Å–∏" –≤ AdminPage —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å API /api/admin/proxies (GET/POST/DELETE)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `frontend/src/components/ProxyManagement.tsx`:
  - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ (host:port, —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
  - –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏ (—Ç–∏–ø, host, port, username, password)
  - –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
  - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏ (toggle)
  - Empty state —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
  - –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã (–∑–µ–ª–µ–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π/—Å–µ—Ä—ã–π)
- –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/pages/dashboard/AdminPage.tsx`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ–∫—Å–∏" —Å –∏–∫–æ–Ω–∫–æ–π Network
  - –û–±–Ω–æ–≤–ª–µ–Ω —Ç–∏–ø `activeTab` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è 'proxies'
  - –î–æ–±–∞–≤–ª–µ–Ω —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ProxyManagement –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤–∫–ª–∞–¥–∫–∏
  - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ProxyManagement

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `frontend/src/components/ProxyManagement.tsx` - —Å–æ–∑–¥–∞–Ω (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∫—Å–∏)
- `frontend/src/pages/dashboard/AdminPage.tsx` (—Å—Ç—Ä–æ–∫–∏ 14, 102, 477-483, 526-534) - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°—É–ø–µ—Ä–∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –ø—Ä–æ–∫—Å–∏

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

### 2025-01-03 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤, –¥–∞—Ç –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ü–ª–∞–Ω –∏–∑ TASK_FIX_REVIEWS_AND_GENERATION.md:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã (500 –æ—à–∏–±–∫–∞)
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–æ–≤–æ—Å—Ç–µ–π (500 –æ—à–∏–±–∫–∞)
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç—ã –æ—Ç–∑—ã–≤–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 2239-2272):
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç `analyze_text_with_gigachat()` (–≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ (—Å–Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∞, –ø–æ—Ç–æ–º —Å–ª–æ–≤–∞—Ä—å)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 2652-2680):
  - –£–±—Ä–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `result_text` –∫–∞–∫ –∫ —Å–ª–æ–≤–∞—Ä—é
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON –∏–∑ —Å—Ç—Ä–æ–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/parser_interception.py` (—Å—Ç—Ä–æ–∫–∏ 513-530):
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ `response_text` –Ω–∞ `org_reply` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å worker.py
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –æ—Ç–∑—ã–≤–∞
- –û–±–Ω–æ–≤–ª–µ–Ω `src/parser.py` (—Å—Ç—Ä–æ–∫–∏ 860-945):
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –æ—Ç–∑—ã–≤–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 2239-2272, 2652-2680) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `src/parser_interception.py` (—Å—Ç—Ä–æ–∫–∏ 513-530) - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π
- `src/parser.py` (—Å—Ç—Ä–æ–∫–∏ 860-945) - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ 500
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ 500
- –û—Ç–≤–µ—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä—Å—è—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –î–∞—Ç–∞ –æ—Ç–∑—ã–≤–∞ –ø–∞—Ä—Å–∏—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 2025-01-06 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —É—Å–ª—É–≥ –∏ UI —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–ª–∞–Ω –∏–∑ TASK_FIX_SERVICES_API_AND_UI.md:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ sqlite3.Row –≤ get_services() (optimized_name –∏ optimized_description –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è)
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ª—É–≥–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API get_services():**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 3078-3171):
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `dict(service)` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Row –≤ —Å–ª–æ–≤–∞—Ä—å (–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π)
  - –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è tuple/list —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è optimized_name –∏ optimized_description
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/pages/dashboard/CardOverviewPage.tsx`:
  - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `editingForm` –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω `useEffect` –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —É—Å–ª—É–≥–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Dialog –∏–∑ shadcn/ui):
    - –ö–∞—Ç–µ–≥–æ—Ä–∏—è, –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ü–µ–Ω–∞
    - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è "–Ω–∞–∑–≤–∞–Ω–∏–µ"
    - –ö–Ω–æ–ø–∫–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –∏ "–û—Ç–º–µ–Ω–∞"
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –∫ –æ—Ç–∫—Ä—ã—Ç–∏—é –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è `updateService()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**UI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–µ–Ω –∫–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è optimized_name –∏ optimized_description (—Å—Ç—Ä–æ–∫–∏ 663-785)
- –ö–æ–¥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–ü—Ä–∏–Ω—è—Ç—å"/"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
- –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è API –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 3078-3171) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ sqlite3.Row
- `frontend/src/pages/dashboard/CardOverviewPage.tsx` (—Å—Ç—Ä–æ–∫–∏ 1-8, 25-33, 200-210, 850-920) - –¥–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- `optimized_name` –∏ `optimized_description` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ API
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —É—Å–ª—É–≥
- –ö–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è—Ç—å" –∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å" —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 2025-01-06 - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Google Business Profile API

**–ü–ª–∞–Ω –∏–∑ TASK_GOOGLE_BUSINESS_API.md:**
- –°–æ–∑–¥–∞—Ç—å OAuth 2.0 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è Google Business Profile API
- –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Business Profile API
- –û–±–Ω–æ–≤–∏—Ç—å GoogleBusinessSyncWorker (–∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã)
- –°–æ–∑–¥–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è OAuth –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**OAuth 2.0 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω `src/google_business_auth.py`:
  - –ö–ª–∞—Å—Å `GoogleBusinessAuth` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OAuth flow
  - –ú–µ—Ç–æ–¥—ã `get_authorization_url()`, `get_credentials_from_code()`, `refresh_credentials()`
  - –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è credentials –≤ —Å–ª–æ–≤–∞—Ä—å –∏ –æ–±—Ä–∞—Ç–Ω–æ

**Google Business API –∫–ª–∏–µ–Ω—Ç:**
- –°–æ–∑–¥–∞–Ω `src/google_business_api.py`:
  - –ö–ª–∞—Å—Å `GoogleBusinessAPI` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Business Profile API
  - –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö: `list_accounts()`, `list_locations()`, `get_location()`, `list_reviews()`, `list_local_posts()`, `get_insights()`
  - –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö: `update_review_reply()`, `create_local_post()`

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GoogleBusinessSyncWorker:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/google_business_sync_worker.py`:
  - –ó–∞–º–µ–Ω–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ `_fake_fetch_reviews()` –∏ `_fake_fetch_stats()` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã `_fetch_reviews()` –∏ `_fetch_stats()`
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_api_client()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è API –∫–ª–∏–µ–Ω—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_save_credentials()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö credentials
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `_publish_review_reply()` –∏ `_publish_post()` –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- –°–æ–∑–¥–∞–Ω `src/api/google_business_api.py` (Blueprint):
  - `GET /api/google/oauth/authorize` - –Ω–∞—á–∞–ª–æ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - `GET /api/google/oauth/callback` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth callback
  - `POST /api/business/<business_id>/google/publish-review-reply` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Ç–∑—ã–≤
  - `POST /api/business/<business_id>/google/publish-post` - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞/–Ω–æ–≤–æ—Å—Ç–∏
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω Blueprint –≤ `src/main.py`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `requirements.txt`:
  - `google-api-python-client>=2.100.0`
  - `google-auth-httplib2>=0.1.1`
  - `google-auth-oauthlib>=1.1.0`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/google_business_auth.py` - —Å–æ–∑–¥–∞–Ω (OAuth –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- `src/google_business_api.py` - —Å–æ–∑–¥–∞–Ω (API –∫–ª–∏–µ–Ω—Ç)
- `src/google_business_sync_worker.py` - –æ–±–Ω–æ–≤–ª–µ–Ω (—Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã API)
- `src/api/google_business_api.py` - —Å–æ–∑–¥–∞–Ω (API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
- `src/main.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Blueprint
- `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Google API

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Google Business Profile —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ API
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã –∏ –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏

**–°—Ç–∞—Ç—É—Å:**
- [x] Backend –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Console (OAuth credentials)
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–≤–∏–¥–∂–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 2025-01-06 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç

**–ü–ª–∞–Ω –∏–∑ TASK_FIX_REVIEWS_SORTING_AND_DATES.md:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –æ—Ç–∑—ã–≤–æ–≤ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π)
- –î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä Review-RatingDate –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç
- –£–ª—É—á—à–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –≤–æ –≤—Å–µ—Ö –ø–∞—Ä—Å–µ—Ä–∞—Ö

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –æ—Ç–∑—ã–≤–æ–≤:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 1101-1108, 1291):
  - –ò–∑–º–µ–Ω–µ–Ω SQL –∑–∞–ø—Ä–æ—Å —Å `ORDER BY published_at DESC, created_at DESC` –Ω–∞ `ORDER BY COALESCE(published_at, created_at) DESC, created_at DESC`
  - –¢–µ–ø–µ—Ä—å –æ—Ç–∑—ã–≤—ã —Å NULL `published_at` —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ `created_at`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ Review-RatingDate:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/parser.py` (—Å—Ç—Ä–æ–∫–∏ 828-856):
  - –î–æ–±–∞–≤–ª–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä `div.Review-RatingDate` –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π –ø—É—Ç—å `div.Review-InfoWrapper > div > div.Review-RatingDate`
  - –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `data-date`, `title` (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥–æ–¥–∞)
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–£–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç –≤ parser_interception.py:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/parser_interception.py` (—Å—Ç—Ä–æ–∫–∏ 472-491):
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞—Ç—ã: `time`, `timestamp`, `created`, `published`, `dateCreated`, `datePublished`, `reviewDate`, `review_date`
  - –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ timestamp: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∏ —Å–µ–∫—É–Ω–¥
  - –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ ISO —Ñ–æ—Ä–º–∞—Ç–∞: –∑–∞–º–µ–Ω–∞ Z –Ω–∞ +00:00, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 5 –æ—Ç–∑—ã–≤–æ–≤

**–£–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç –≤ worker.py:**
- –û–±–Ω–æ–≤–ª–µ–Ω `src/worker.py` (—Å—Ç—Ä–æ–∫–∏ 325-363):
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π: `published_at`, `publishedAt`, `created_at`, `createdAt`, `time`, `timestamp`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ timestamp (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –∏ —Å–µ–∫—É–Ω–¥—ã)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞—Ç: "—Å–µ–≥–æ–¥–Ω—è", "–≤—á–µ—Ä–∞"
  - –£–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ ISO —Ñ–æ—Ä–º–∞—Ç–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è 'T', 'Z' –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö '-'
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/main.py` (—Å—Ç—Ä–æ–∫–∏ 1101-1108, 1291) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ –∏ –ø–æ—Å—Ç–æ–≤
- `src/parser.py` (—Å—Ç—Ä–æ–∫–∏ 828-856) - –¥–æ–±–∞–≤–ª–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä Review-RatingDate, —É–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- `src/parser_interception.py` (—Å—Ç—Ä–æ–∫–∏ 472-491) - —É–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –∏–∑ API
- `src/worker.py` (—Å—Ç—Ä–æ–∫–∏ 325-363) - —É–ª—É—á—à–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –≤ worker

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –û—Ç–∑—ã–≤—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É), –¥–∞–∂–µ –µ—Å–ª–∏ `published_at` = NULL
- –î–∞—Ç—ã –ø–∞—Ä—Å—è—Ç—Å—è –∏–∑ –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –°–µ–ª–µ–∫—Ç–æ—Ä `Review-RatingDate` —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ –Ø–Ω–¥–µ–∫—Å.–ë–∏–∑–Ω–µ—Å
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç

**–°—Ç–∞—Ç—É—Å:**
- [x] –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç
- [ ] –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

---
---

### 2026-01-09 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Google (Frontend)

**–ü–ª–∞–Ω –∏–∑ FRONTEND_GOOGLE_OAUTH_WIDGET.md:**
- –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handleGoogleAuth` –≤ `ExternalIntegrations.tsx`
- –ó–∞–º–µ–Ω–∏—Ç—å —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ —Ç–æ–∫–µ–Ω–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Google" —Å –∏–∫–æ–Ω–∫–æ–π
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è popup –¥–ª—è OAuth –∏ –ø–æ–ª–ª–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É callback —á–µ—Ä–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ postMessage
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –û–±–Ω–æ–≤–ª–µ–Ω `ExternalIntegrations.tsx`:
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω UI: –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º—ã –≤–≤–æ–¥–∞ —Ç–æ–∫–µ–Ω–∞ —Ç–µ–ø–µ—Ä—å —Å–µ–∫—Ü–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Google"
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleGoogleAuth`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Ç –±—ç–∫–µ–Ω–¥–∞ –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç popup
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º polling –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω `useEffect` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `google_auth=success/error`
  - –£–ª—É—á—à–µ–Ω —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤: –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ (–∑–µ–ª–µ–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `frontend/src/components/ExternalIntegrations.tsx` - –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Google OAuth

**–°—Ç–∞—Ç—É—Å:**
### 2026-01-09 - Implementing Growth Stages Feature
- [x] Create `src/api/growth_api.py` with `/api/business/<id>/stages`.
- [x] Register `growth_bp` in `src/main.py`.
- [x] Run `init_database_schema.py` to ensure `GrowthStages` table exists.
- [x] Update `frontend/src/components/ProgressTracker.tsx` with new UI and API integration.

