# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Network Interception –ø–∞—Ä—Å–µ—Ä–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –£–ª—É—á—à–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤

#### –û—Ç–∑—ã–≤—ã (fetchReviews API)
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_extract_reviews_from_api()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞, —Ä–µ–π—Ç–∏–Ω–≥–∞, —Ç–µ–∫—Å—Ç–∞, –¥–∞—Ç—ã
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (ownerComment, response, reply)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä JSON (data.reviews, result.reviews, items)

#### –î–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (location-info API)
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_extract_location_info()` –¥–ª—è location-info endpoint
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, –∞–¥—Ä–µ—Å–∞, —Ä–µ–π—Ç–∏–Ω–≥–∞, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∑—ã–≤–æ–≤

#### –î–∞–Ω–Ω—ã–µ –∏–∑ search API
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_extract_search_api_data()` –¥–ª—è search endpoint
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ worker.py

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ë—ã–ª–æ:
from parser import parse_yandex_card

# –°—Ç–∞–ª–æ:
from parser_config import parse_yandex_card
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–∞—Ä—Å–µ—Ä–∞ (interception –∏–ª–∏ legacy)
- Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–µ—Ä –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `PARSER_MODE`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç –Ω–∞ URL: https://yandex.ru/maps/org/feniks/1058063126/

**–£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–æ:**
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ: –§–µ–Ω–∏–∫—Å
- ‚úÖ –ê–¥—Ä–µ—Å: –¢–æ—Ä—Ñ—è–Ω–∞—è –¥–æ—Ä–æ–≥–∞, 9, –∫–æ—Ä–ø. 3, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
- ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω: +7 (812) 602-92-89
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥: 4.6
- ‚úÖ –û—Ç–∑—ã–≤–æ–≤: 52 (–∏–∑ API)
- ‚úÖ –ù–æ–≤–æ—Å—Ç–µ–π: 9
- ‚úÖ –§–æ—Ç–æ: 47

**–ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ API –∑–∞–ø—Ä–æ—Å–æ–≤:** 15+

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í worker.py (—É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ)
```python
from parser_config import parse_yandex_card
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
export PARSER_MODE=interception

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –ø–∞—Ä—Å–µ—Ä
export PARSER_MODE=legacy
```

### –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```python
from parser_interception import parse_yandex_card
data = parse_yandex_card("https://yandex.ru/maps/org/...")
```

## üìà –£–ª—É—á—à–µ–Ω–∏—è

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª–∏—Å—å API –∑–∞–ø—Ä–æ—Å—ã, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–≤–ª–µ–∫–∞–ª–∏—Å—å
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è fallback –Ω–∞ HTML –ø–∞—Ä—Å–∏–Ω–≥

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- ‚úÖ –û—Ç–∑—ã–≤—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ API (52 –æ—Ç–∑—ã–≤–∞)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ location-info API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä JSON
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ –æ—Ç–∑—ã–≤–æ–≤

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–†–µ–π—Ç–∏–Ω–≥ –≤ –æ—Ç–∑—ã–≤–∞—Ö** - –∏–Ω–æ–≥–¥–∞ –Ω–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã API)
2. **–û—Ç–≤–µ—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏** - –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
3. **–ö–∞–ø—á–∞** - –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã (–∫–∞–∫ –∏ –≤ —Å—Ç–∞—Ä–æ–º –ø–∞—Ä—Å–µ—Ä–µ)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ worker.py
3. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ production
4. ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
5. ‚è≥ –î–∞–ª—å–Ω–µ–π—à–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ HTML –ø–∞—Ä—Å–∏–Ω–≥, –µ—Å–ª–∏ API –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

