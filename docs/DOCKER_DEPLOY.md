# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –∫–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ docker-compose –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ VPS.

## –ü–æ—Ä—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥ (Dev)** | `3000` | Vite dev server ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–Ω–∞ —Ö–æ—Å—Ç–µ** (`npm run dev`), –Ω–µ –≤ Docker |
| **–ë—ç–∫–µ–Ω–¥ API** | `8000` | Flask ‚Äî –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `app` |
| **Postgres** | `5432` | –í–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker (–Ω–µ –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞—Ä—É–∂—É) |

**–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Docker:** –±—ç–∫–µ–Ω–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ –Ω–∞ —Ö–æ—Å—Ç–µ:
```bash
docker compose up -d --build   # postgres + app + worker
cd frontend && npm run dev     # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ http://localhost:3000
```
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ 3000 –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api` –Ω–∞ –±—ç–∫–µ–Ω–¥ (8000).

**–ü—Ä–æ–¥–∞–∫—à–µ–Ω:** —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑ –∏ —Ä–∞–∑–¥–∞—ë—Ç—Å—è Flask —Å 8000, –ª–∏–±–æ —á–µ—Ä–µ–∑ Nginx (80/443).

> üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ: [PORTS_AND_SERVICES.md](../PORTS_AND_SERVICES.md), [ALGORITHM_UPDATE.md](../ALGORITHM_UPDATE.md)

## –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

- Docker
- Docker Compose (v2: `docker compose`)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Ubuntu/Debian):

```bash
sudo apt-get update && sudo apt-get install -y ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a644 /etc/apt/keyrings/docker.asc
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update && sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo usermod -aG docker $USER
# –≤—ã–π—Ç–∏ –∏–∑ SSH –∏ –∑–∞–π—Ç–∏ —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å –≥—Ä—É–ø–ø–∞ docker
```

## –ü–µ—Ä–µ–Ω–æ—Å –ø—Ä–æ–µ–∫—Ç–∞

1. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –∏ —Å–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∞—Ä—Ö–∏–≤):
   ```bash
   git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è> /opt/local
   cd /opt/local
   ```

2. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   POSTGRES_USER=local
   POSTGRES_PASSWORD=<–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å>
   POSTGRES_DB=local
   ```
   –ï—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å ‚Äî –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `docker-compose.yml`.

3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–±–µ–∑ BuildKit ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
   ```bash
   ./scripts/docker-compose-build.sh up -d --build
   ```
   –ò–ª–∏ –≤—Ä—É—á–Ω—É—é: `DOCKER_BUILDKIT=0 docker compose up -d --build`.  
   –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã app –∏ worker –∂–¥—É—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Postgres, –≤—ã–ø–æ–ª–Ω—è—é—Ç `flask db upgrade` (—Å–æ–∑–¥–∞—é—Ç —Ç–∞–±–ª–∏—Ü—ã, –≤ —Ç.—á. `parsequeue`), –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/–≤–æ—Ä–∫–µ—Ä.

4. –ü—Ä–æ–≤–µ—Ä–∫–∞:
   ```bash
   curl -s http://localhost:8000/health
   docker compose ps
   ```
   –î–ª—è UI: –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —Ö–æ—Å—Ç–µ (`cd frontend && npm run dev`) –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000

## –í–∞–∂–Ω–æ

- **Postgres –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ `DATABASE_URL` (–≤ compose –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
- **–î–∞–Ω–Ω—ã–µ –ë–î** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ volume `pgdata`. –ü—Ä–∏ `docker compose down` volume –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è; –ø—Ä–∏ `docker compose down -v` ‚Äî —É–¥–∞–ª—è–µ—Ç—Å—è.
- **–°–±–æ—Ä–∫–∞ –±–µ–∑ BuildKit:** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å `DOCKER_BUILDKIT=0`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ gRPC –Ω–∞ Docker Desktop. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞: –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
  ```bash
  git pull   # –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
  ./scripts/docker-compose-build.sh up -d --build
  ```

## –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

–ü–æ—Å–ª–µ —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ—Å–±–æ—Ä–æ–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±—Ä–∞–∑–æ–≤ Docker –∫–æ–ø–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤–∏—Å—è—á–∏–µ –æ–±—Ä–∞–∑—ã –∏ –∫—ç—à —Å–±–æ—Ä–∫–∏ (–∏–Ω–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–∏–≥–∞–±–∞–π—Ç). –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –º–æ–∂–Ω–æ —á–∏—Å—Ç–∏—Ç—å:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ
docker system df -v

# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–µ –æ–±—Ä–∞–∑—ã app/worker/postgres):
docker container prune -f    # –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker image prune -f        # –æ–±—Ä–∞–∑—ã –±–µ–∑ —Ç–µ–≥–∞ (dangling)
docker builder prune -f      # —á–∞—Å—Ç—å –∫—ç—à–∞ —Å–±–æ—Ä–∫–∏

# –ë–æ–ª–µ–µ –∂—ë—Å—Ç–∫–∞—è: –≤–µ—Å—å –∫—ç—à —Å–±–æ—Ä–∫–∏ (—Å–ª–µ–¥—É—é—â–∞—è —Å–±–æ—Ä–∫–∞ –±—É–¥–µ—Ç –¥–æ–ª—å—à–µ)
docker builder prune -a -f

# –†–∞–¥–∏–∫–∞–ª—å–Ω–æ: –≤—Å—ë –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ, –≤ —Ç.—á. –æ–±—Ä–∞–∑—ã –±–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker system prune -a -f
```

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ç—Ä–æ–π–∫–∏ –∫–æ–º–∞–Ω–¥ –æ–±—ã—á–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è 1‚Äì2 –ì–ë.

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** `docker system prune -a -f` –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: –æ–Ω —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –æ–±—Ä–∞–∑—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤ —Ç.—á. `seo-worker`, –µ—Å–ª–∏ –≤–æ—Ä–∫–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ `python:3.11-slim`). –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –¥–µ–ª–∞—Ç—å `./scripts/docker-compose-build.sh up -d --build`.

**–û–¥–∏–Ω –ª–∏—à–Ω–∏–π buildx-builder:** –µ—Å–ª–∏ –≤ `docker buildx ls` –≤–∏–¥–Ω–æ –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –±–∏–ª–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `cleanbuilder` –∏ `gifted_wozniak`), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ. –£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–π: `docker buildx rm gifted_wozniak` (–∏–º—è –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞).

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
docker compose down
```

–¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤; volume —Å –¥–∞–Ω–Ω—ã–º–∏ Postgres –æ—Å—Ç–∞—ë—Ç—Å—è.

---

## –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —Å–±–æ—Ä–∫–∞ —Å BuildKit

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è **–±–µ–∑ BuildKit** (`DOCKER_BUILDKIT=0`), —á—Ç–æ–±—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ Docker Desktop (–Ω–∞ –º–Ω–æ–≥–∏—Ö –º–∞—à–∏–Ω–∞—Ö BuildKit –¥–∞—ë—Ç –æ—à–∏–±–∫—É gRPC —Å –Ω–µ–ø–µ—á–∞—Ç–∞–µ–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö).

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É —Å BuildKit (–±—ã—Å—Ç—Ä–µ–µ, –∫—ç—à —Å–ª–æ—ë–≤):

```bash
docker compose up -d --build
```

–ü—Ä–∏ –æ—à–∏–±–∫–µ `failed to dial gRPC ... x-docker-expose-session-sharedkey contains value with non-printable ASCII` ‚Äî —ç—Ç–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Docker/buildx, –Ω–µ –∫–æ–¥. –†–µ—à–µ–Ω–∏–µ: —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –±–µ–∑ BuildKit (`./scripts/docker-compose-build.sh up -d --build`) –∏–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑ —Å–±—Ä–æ—Å–∏—Ç—å buildx: `docker buildx rm --all-inactive`, `docker buildx create --use`, `docker buildx inspect --bootstrap`.

<details>
<summary>–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ buildx (–µ—Å–ª–∏ –ø—Ä–æ–±—É–µ—Ç–µ BuildKit)</summary>

### –ß—Ç–æ —Ç–∞–∫–æ–µ buildx builder

**buildx** ‚Äî —ç—Ç–æ –∫–ª–∏–µ–Ω—Ç Docker –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π *builder* (–ø—Ä–æ—Ü–µ—Å—Å/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä), —Å –∫–æ—Ç–æ—Ä—ã–º –æ–±—â–∞–µ—Ç—Å—è –ø–æ gRPC. –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è builder‚Äô–∞ –ø–æ–≤—Ä–µ–¥–∏–ª–∞—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Docker Desktop –∏–ª–∏ —Å–º–µ–Ω—ã context), –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö gRPC –º–æ–≥—É—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ–ø–µ—á–∞—Ç–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã, –∏ —Å–±–æ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç. –°–±—Ä–æ—Å builder‚Äô–∞ –æ–±—ã—á–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∑–∞ 2‚Äì3 –º–∏–Ω—É—Ç—ã.

### Recovery: –ø–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –°–±—Ä–æ—Å–∏—Ç—å buildx builder
docker buildx rm --all-inactive
docker buildx create --use
docker buildx inspect --bootstrap

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
docker compose build --no-cache
docker compose up -d
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è ‚Äî —Å–º. ¬´–ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã¬ª –Ω–∏–∂–µ.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: —Å–±–æ—Ä–∫–∞ –±–µ–∑ BuildKit

–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏—á–∏–Ω–∞ –∏–º–µ–Ω–Ω–æ –≤ BuildKit/buildx, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –µ–≥–æ:

```bash
DOCKER_BUILDKIT=0 docker compose build
```

–≠—Ç–æ **–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º**: —Å–±–æ—Ä–∫–∞ –∏–¥—ë—Ç –ø–æ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º–µ (–±–µ–∑ BuildKit). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –º–µ–Ω—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π). –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª—É—á—à–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å recovery –≤—ã—à–µ –∏ —Å–æ–±–∏—Ä–∞—Ç—å —Å BuildKit.

### –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker Desktop** ‚Äî –ø–æ—Å–ª–µ –∞–ø–¥–µ–π—Ç–∞ —Å—Ç–∞—Ä—ã–π buildx builder –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
- **–°–ª–æ–º–∞–Ω–Ω—ã–π –∏–ª–∏ ¬´–∑–∞–ª–∏–ø—à–∏–π¬ª buildx builder** ‚Äî —Ä–µ—à–∞–µ—Ç—Å—è —Å–±—Ä–æ—Å–æ–º (`docker buildx rm ...` –∏ `create --use`).
- **–ü—Ä–æ–∫—Å–∏ / VPN / –≥—Ä—è–∑–Ω—ã–µ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** ‚Äî –º–æ–≥—É—Ç –ø–æ–¥–º–µ—à–∏–≤–∞—Ç—å—Å—è –≤ gRPC-–∑–∞–≥–æ–ª–æ–≤–∫–∏; –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å VPN/–ø—Ä–æ–∫—Å–∏ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É –≤ —á–∏—Å—Ç–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –±–µ–∑ –ª–∏—à–Ω–∏—Ö `export`.
- **–°–º–µ–Ω–∞ Docker context** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π daemon) ‚Äî —Ç–µ–∫—É—â–∏–π builder –º–æ–≥ –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å—Ç–∞—Ä–æ–º—É context; –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã context —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π builder (—Å–º. recovery).

### Best practice

- **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Docker Desktop** ‚Äî –æ–¥–∏–Ω —Ä–∞–∑ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–±—Ä–æ—Å buildx builder (–±–ª–æ–∫ –∫–æ–º–∞–Ω–¥ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ ¬´Recovery¬ª –≤—ã—à–µ).
- **–ï—Å–ª–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É gRPC** ‚Äî –Ω–µ —á–∏–Ω–∏—Ç—å –∫–æ–¥ –∏ –Ω–µ –º–µ–Ω—è—Ç—å Dockerfile; —Å–Ω–∞—á–∞–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ recovery-–∞–ª–≥–æ—Ä–∏—Ç–º—É.

</details>
