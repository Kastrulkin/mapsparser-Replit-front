# üîí –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!
**–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö!**

## üìã –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### 1. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `safe_db_utils.get_db_connection()` –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î:
```python
from safe_db_utils import get_db_connection

conn = get_db_connection()
```

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏**
–í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `safe_migrate()`:
```python
from safe_db_utils import safe_migrate

def my_migration(cursor):
    # –í–∞—à –∫–æ–¥ –º–∏–≥—Ä–∞—Ü–∏–∏
    pass

safe_migrate(my_migration, "–û–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏")
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**
–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –î–û –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –ü–û–°–õ–ï –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–µ–¥–∏–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:

- **`src/reports.db`** - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ**: –°—Ç–∞—Ä–∞—è –±–∞–∑–∞ `reports.db` (–∫–æ—Ä–µ–Ω—å) –±—ã–ª–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑–æ–π –∏ —É–¥–∞–ª–µ–Ω–∞.

## üíæ –ë—ç–∫–∞–ø—ã

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `db_backups/`:
- –§–æ—Ä–º–∞—Ç: `reports_YYYYMMDD_HHMMSS.db.backup`
- –°–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
```python
from safe_db_utils import restore_from_backup

restore_from_backup("db_backups/reports_20241101_120000.db.backup")
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ë–î

- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –î–û –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `safe_migrate()`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –ü–û–°–õ–ï –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –î–∞–Ω–Ω—ã–µ –Ω–µ —É–º–µ–Ω—å—à–∏–ª–∏—Å—å

## üö´ –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

‚ùå **–ù–ò–ö–û–ì–î–ê –ù–ï –ò–ó–ú–ï–ù–Ø–ô–¢–ï –î–ê–ù–ù–´–ï –í –ì–û–¢–û–í–û–ô –ë–ê–ó–ï –î–ê–ù–ù–´–• –ë–ï–ó –Ø–í–ù–û–ì–û –†–ê–ó–†–ï–®–ï–ù–ò–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø!**
   - –ù–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏
   - –ù–µ —É–¥–∞–ª—è–π—Ç–µ –¥–∞–Ω–Ω—ã–µ
   - –í—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ø–í–ù–û –ø–æ–ø—Ä–æ—Å–∏–ª –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

‚ùå –ù–ï –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ `DROP TABLE` –±–µ–∑ –±—ç–∫–∞–ø–∞
‚ùå –ù–ï –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ `DELETE` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
‚ùå –ù–ï –∏–∑–º–µ–Ω—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `safe_migrate()`
‚ùå –ù–ï –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ –ë–î –Ω–∞–ø—Ä—è–º—É—é - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `safe_db_utils`

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—ç–∫–∞–ø—ã –≤ `db_backups/`
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
4. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞

